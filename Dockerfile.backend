# 1. Base Image
FROM python:3.11-slim

# 2. Set Environment Variables
ENV PYTHONDONTWRITEBYTECODE 1
ENV PYTHONUNBUFFERED 1

# 3. Set Work Directory
WORKDIR /app

# 4. Install Dependencies
# requirements.txt를 먼저 복사하여 종속성이 변경되지 않는 한 Docker 캐시를 활용합니다.
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

# 5. Copy Project Files
COPY . .

# 6. Set Default Command
# main.py 파일을 5000번 포트로 실행합니다. uvicorn, gunicorn 등 실제 환경에 맞게 이 부분을 수정해야 할 수 있습니다.
# # 여기서는 FastAPI/Uvicorn을 가정합니다.
CMD ["uvicorn", "main:app", "--host", "0.0.0.0", "--port", "5000"]
# CMD ["uv", "run", "main.py", "--host", "0.0.0.0", "--port", "5000"]